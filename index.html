<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>JoJo Stand Allocator</title>
<style>
  body { font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial; max-width: 720px; margin: 3rem auto; padding: 1rem; background:#f5f5f5; }
  .card { border-radius: 12px; padding: 1.5rem; border: 1px solid #ddd; background:#fff; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
  button { padding: .6rem 1rem; font-size: 1rem; border-radius: 6px; cursor:pointer; }
  .stand { font-weight: 700; font-size: 1.25rem; margin-top: .75rem; text-align:center; }
  .small { font-size: .9rem; color:#555; text-align:center; }
  #standImage { max-width: 100%; margin-top: .75rem; border-radius: 8px; display:block; margin-left:auto; margin-right:auto; }
  a { text-decoration:none; color:inherit; }
</style>
</head>
<body>
<h1 style="text-align:center;">Find your JoJo Stand</h1>
<div class="card">
  <p id="status" style="text-align:center;">Checking...</p>

  <div id="standBlock" style="display:none">
    <div class="stand" id="standName"></div>
    <a id="standLink" href="" target="_blank">
      <img id="standImage" src="" alt="Your Stand">
    </a>
    <div class="small">This stand is stored on this browser and will not change unless you clear site data.</div>
    <p style="margin-top:.75rem; text-align:center;">
      <button id="revealBtn">Reveal my Stand</button>
      <button id="copyBtn" style="margin-left:.5rem">Copy</button>
    </p>
  </div>

  <div id="claimBlock" style="display:none; text-align:center;">
    <p class="small">No stand yet for this browser. Tap the button to claim one permanently for this browser.</p>
    <button id="claimBtn">Claim my Stand</button>
  </div>

  <div id="helper" style="margin-top:.75rem" class="small"></div>
</div>

<script>
const STORAGE_KEY = 'jojo_stand_v2';
const SPECIAL_STAND = "You will die poor guy";
const SPECIAL_PROB = 0.3; // 30%

const stands = [
  {name: "Star Platinum", img:"https://static.wikia.nocookie.net/jojowiki/images/0/0e/Star_Platinum.png/revision/latest/scale-to-width-down/350?cb=20190701035553"},
  {name: "The World", img:"https://static.wikia.nocookie.net/jojowiki/images/6/6d/The_World.png/revision/latest/scale-to-width-down/350?cb=20190701035600"},
  {name: "Crazy Diamond", img:"https://static.wikia.nocookie.net/jojowiki/images/4/4e/Crazy_Diamond.png/revision/latest/scale-to-width-down/350?cb=20190701035606"},
  {name: "Killer Queen", img:"https://static.wikia.nocookie.net/jojowiki/images/3/3b/Killer_Queen.png/revision/latest/scale-to-width-down/350?cb=20190701035613"},
  {name: "Gold Experience", img:"https://static.wikia.nocookie.net/jojowiki/images/4/4e/Gold_Experience.png/revision/latest/scale-to-width-down/350?cb=20190701035619"},
  {name: "Sticky Fingers", img:"https://static.wikia.nocookie.net/jojowiki/images/7/7e/Sticky_Fingers.png/revision/latest/scale-to-width-down/350?cb=20190701035626"},
  {name: "Stone Free", img:"https://static.wikia.nocookie.net/jojowiki/images/3/3e/Stone_Free.png/revision/latest/scale-to-width-down/350?cb=20190701035632"},
  {name: "Tusk Act 4", img:"https://static.wikia.nocookie.net/jojowiki/images/0/0e/Tusk_Act_4.png/revision/latest/scale-to-width-down/350?cb=20190701035638"},
  {name: "Made in Heaven", img:"https://static.wikia.nocookie.net/jojowiki/images/2/2a/Made_in_Heaven.png/revision/latest/scale-to-width-down/350?cb=20190701035644"},
  {name: "King Crimson", img:"https://static.wikia.nocookie.net/jojowiki/images/6/6d/King_Crimson.png/revision/latest/scale-to-width-down/350?cb=20190701035651"},
  {name: "Weather Report", img:"https://static.wikia.nocookie.net/jojowiki/images/3/3e/Weather_Report.png/revision/latest/scale-to-width-down/350?cb=20190701035657"},
  {name: "The Hand", img:"https://static.wikia.nocookie.net/jojowiki/images/6/6d/The_Hand.png/revision/latest/scale-to-width-down/350?cb=20190701035703"},
  {name: "Harvest", img:"https://static.wikia.nocookie.net/jojowiki/images/1/1d/Harvest.png/revision/latest/scale-to-width-down/350?cb=20190701035709"},
  {name: "Hierophant Green", img:"https://static.wikia.nocookie.net/jojowiki/images/7/7d/Hierophant_Green.png/revision/latest/scale-to-width-down/350?cb=20190701035715"},
  {name: "Green Tea", img:"https://static.wikia.nocookie.net/jojowiki/images/5/5e/Green_Tea.png/revision/latest/scale-to-width-down/350?cb=20190701035722"},
  {name: "Hermit Purple", img:"https://static.wikia.nocookie.net/jojowiki/images/2/2b/Hermit_Purple.png/revision/latest/scale-to-width-down/350?cb=20190701035728"},
  {name: "Magician's Red", img:"https://static.wikia.nocookie.net/jojowiki/images/4/4e/Magician%27s_Red.png/revision/latest/scale-to-width-down/350?cb=20190701035734"},
  {name: "Silver Chariot", img:"https://static.wikia.nocookie.net/jojowiki/images/6/6f/Silver_Chariot.png/revision/latest/scale-to-width-down/350?cb=20190701035740"},
  {name: "The Fool", img:"https://static.wikia.nocookie.net/jojowiki/images/3/3d/The_Fool.png/revision/latest/scale-to-width-down/350?cb=20190701035746"},
  {name: "Emperor", img:"https://static.wikia.nocookie.net/jojowiki/images/5/5e/Emperor.png/revision/latest/scale-to-width-down/350?cb=20190701035753"},
  {name: "Justice", img:"https://static.wikia.nocookie.net/jojowiki/images/3/3f/Justice.png/revision/latest/scale-to-width-down/350?cb=20190701035759"},
  {name: "Lovers", img:"https://static.wikia.nocookie.net/jojowiki/images/6/6a/Lovers.png/revision/latest/scale-to-width-down/350?cb=20190701035805"},
  {name: "Sun", img:"https://static.wikia.nocookie.net/jojowiki/images/4/4e/Sun.png/revision/latest/scale-to-width-down/350?cb=20190701035811"},
  {name: "Death Thirteen", img:"https://static.wikia.nocookie.net/jojowiki/images/7/7e/Death_Thirteen.png/revision/latest/scale-to-width-down/350?cb=20190701035817"},
  {name: "Judgement", img:"https://static.wikia.nocookie.net/jojowiki/images/0/0e/Judgement.png/revision/latest/scale-to-width-down/350?cb=20190701035823"},
  {name: "High Priestess", img:"https://static.wikia.nocookie.net/jojowiki/images/2/2b/High_Priestess.png/revision/latest/scale-to-width-down/350?cb=20190701035829"},
  {name: "Geb", img:"https://static.wikia.nocookie.net/jojowiki/images/0/0e/Geb.png/revision/latest/scale-to-width-down/350?cb=20190701035835"},
  {name: "Ebony Devil", img:"https://static.wikia.nocookie.net/jojowiki/images/5/5e/Ebony_Devil.png/revision/latest/scale-to-width-down/350?cb=20190701035841"},
  {name: "Yellow Temperance", img:"https://static.wikia.nocookie.net/jojowiki/images/4/4e/Yellow_Temperance.png/revision/latest/scale-to-width-down/350?cb=20190701035847"},
  {name: "Hanged Man", img:"https://static.wikia.nocookie.net/jojowiki/images/6/6e/Hanged_Man.png/revision/latest/scale-to-width-down/350?cb=20190701035853"},
  {name: "Wheel of Fortune", img:"https://static.wikia.nocookie.net/jojowiki/images/3/3b/Wheel_of_Fortune.png/revision/latest/scale-to-width-down/350?cb=20190701035859"},
  {name: "Dark Blue Moon", img:"https://static.wikia.nocookie.net/jojowiki/images/1/1d/Dark_Blue_Moon.png/revision/latest/scale-to-width-down/350?cb=20190701035905"},
  {name: "Strength", img:"https://static.wikia.nocookie.net/jojowiki/images/0/0e/Strength.png/revision/latest/scale-to-width-down/350?cb=20190701035911"},
  {name: "Aqua Necklace", img:"https://static.wikia.nocookie.net/jojowiki/images/4/4e/Aqua_Necklace.png/revision/latest/scale-to-width-down/350?cb=20190701035917"},
  {name: "Bad Company", img:"https://static.wikia.nocookie.net/jojowiki/images/3/3d/Bad_Company.png/revision/latest/scale-to-width-down/350?cb=20190701035923"},
  {name: "Red Hot Chili Pepper", img:"https://static.wikia.nocookie.net/jojowiki/images/2/2b/Red_Hot_Chili_Pepper.png/revision/latest/scale-to-width-down/350?cb=20190701035929"},
  {name: "The Lock", img:"https://static.wikia.nocookie.net/jojowiki/images/1/1d/The_Lock.png/revision/latest/scale-to-width-down/350?cb=20190701035935"},
  {name: "Surface", img:"https://static.wikia.nocookie.net/jojowiki/images/0/0e/Surface.png/revision/latest/scale-to-width-down/350?cb=20190701035941"},
  {name: "Love Deluxe", img:"https://static.wikia.nocookie.net/jojowiki/images/4/4e/Love_Deluxe.png/revision/latest/scale-to-width-down/350?cb=20190701035947"},
  {name: "Pearl Jam", img:"https://static.wikia.nocookie.net/jojowiki/images/3/3d/Pearl_Jam.png/revision/latest/scale-to-width-down/350?cb=20190701035953"},
  {name: "You will die poor guy", img:"https://via.placeholder.com/160/ff0000/ffffff?text=You+will+die+poor+guy"}
];

// Compute otherStands
const otherStands = stands.map(s => s.name).filter(n => n !== SPECIAL_STAND);

// Secure random float
function secureRandomFloat(){
  const arr = new Uint32Array(1);
  window.crypto.getRandomValues(arr);
  return arr[0] / 4294967296;
}

function chooseWeightedStand(){
  const r = secureRandomFloat();
  if(r < SPECIAL_PROB) return SPECIAL_STAND;
  const idx = Math.floor((r - SPECIAL_PROB)/(1 - SPECIAL_PROB) * otherStands.length);
  return otherStands[Math.min(Math.max(0, idx), otherStands.length -1)];
}

function showStand(name){
  const standObj = stands.find(s=>s.name===name);
  document.getElementById('standName').textContent = name;
  if(standObj){
    document.getElementById('standImage').src = standObj.img;
    document.getElementById('standLink').href = `https://jojo.fandom.com/wiki/${encodeURIComponent(standObj.name)}`;
  }
  document.getElementById('status').textContent = "You've claimed a stand!";
  document.getElementById('standBlock').style.display = 'block';
  document.getElementById('claimBlock').style.display = 'none';
}

function showClaimPrompt(){
  document.getElementById('status').textContent = "No stand found for this browser.";
  document.getElementById('standBlock').style.display = 'none';
  document.getElementById('claimBlock').style.display = 'block';
}

function saveStand(name){
  try{
    localStorage.setItem(STORAGE_KEY,name);
    document.cookie = `${STORAGE_KEY}=${encodeURIComponent(name)};max-age=${60*60*24*365*5};SameSite=Lax;path=/`;
  }catch(e){console.warn(e);}
}

function getCookie(name){
  const m = document.cookie.match('(?:^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
  return m ? decodeURIComponent(m[1]) : null;
}

// Event listeners
document.getElementById('claimBtn').addEventListener('click', ()=>{
  const stand = chooseWeightedStand();
  saveStand(stand);
  showStand(stand);
  document.getElementById('helper').textContent = "Tip: Bookmark this page and don't clear site storage to keep it permanent.";
});

document.getElementById('revealBtn').addEventListener('click', ()=>{
  const s = localStorage.getItem(STORAGE_KEY) || getCookie(STORAGE_KEY);
  if(s) alert("Your stand: "+s);
});

document.getElementById('copyBtn').addEventListener('click', ()=>{
  const s = localStorage.getItem(STORAGE_KEY) || getCookie(STORAGE_KEY);
  if(!s) return alert("No stand to copy.");
  navigator.clipboard?.writeText(s).then(()=>alert("Copied: "+s)).catch(()=>alert("Could not copy. Select and copy manually: "+s));
});

// INIT
window.addEventListener('load', ()=>{
  const s = localStorage.getItem(STORAGE_KEY) || getCookie(STORAGE_KEY);
  if(s) showStand(s);
  else showClaimPrompt();
});
</script>
</body>
</html>
